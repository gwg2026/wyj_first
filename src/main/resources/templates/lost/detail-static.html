<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤±ç‰©è¯¦æƒ… - é™æ€æµ‹è¯•ç‰ˆ</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Microsoft YaHei', Arial, sans-serif; background: #f5f5f5; }
        .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; }
        .header a { color: white; text-decoration: none; }
        .container { max-width: 900px; margin: 20px auto; padding: 0 20px; }
        .detail-card { background: white; border-radius: 10px; padding: 30px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .detail-title { font-size: 24px; font-weight: bold; margin-bottom: 20px; }
        .detail-image { width: 100%; max-width: 600px; border-radius: 10px; margin: 20px 0; }
        .detail-info { margin: 15px 0; }
        .detail-label { font-weight: bold; color: #666; width: 100px; display: inline-block; }
        .detail-value { color: #333; }
        .type-badge { display: inline-block; padding: 5px 15px; border-radius: 20px; margin-right: 10px; color: white; }
        .type-lost { background: #ff6b6b; }
        .type-found { background: #4ecdc4; }
        .status-badge { display: inline-block; padding: 5px 15px; border-radius: 20px; color: white; }
        .status-found { background: #51cf66; }
        .status-lost { background: #ffd43b; color: #333; }
        .contact-info { background: #f8f9fa; padding: 20px; border-radius: 10px; margin: 20px 0; }
        .actions { margin-top: 30px; }
        .btn { padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; margin-right: 10px; transition: all 0.3s ease; }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.2); }
        .btn:disabled { opacity: 0.6; cursor: not-allowed; transform: none; box-shadow: none; }
        .btn-primary { background: #667eea; color: white; }
        .btn-success { background: #51cf66; color: white; }
        .btn-danger { background: #ff6b6b; color: white; }
        .btn-warning { background: #ffd43b; color: #333; }
        .btn-info { background: #74c0fc; color: white; }
        .comment-section { animation: fadeInUp 0.6s ease-out; }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        .scroll-top { position: fixed; bottom: 30px; right: 30px; width: 50px; height: 50px; background: #667eea; color: white; border: none; border-radius: 50%; cursor: pointer; display: none; transition: all 0.3s ease; z-index: 1000; }
        .scroll-top:hover { background: #5a6fd8; transform: translateY(-3px); }
        .loading-spinner { display: inline-block; width: 20px; height: 20px; border: 3px solid #f3f3f3; border-top: 3px solid #667eea; border-radius: 50%; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .progress-bar { position: fixed; top: 0; left: 0; height: 3px; background: #667eea; z-index: 9999; transition: width 0.3s ease; }
        .btn-like:hover, .btn-reply:hover { opacity: 0.8; }
        .comment-item:hover { box-shadow: 0 5px 15px rgba(0,0,0,0.1); transform: translateY(-2px); }
        .detail-image:hover { filter: brightness(1.05); transform: scale(1.01); transition: all 0.3s ease; cursor: zoom-in; }
        .related-item:hover { transform: translateY(-3px); box-shadow: 0 5px 15px rgba(0,0,0,0.15); }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes fadeOut { from { opacity: 1; } to { opacity: 0; } }
        @keyframes zoomIn { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .comment-section { animation: slideUp 0.5s ease-out; }
        
        .comments-container { margin-top: 30px; }
        .comment-item { background: #f8f9fa; border-radius: 10px; padding: 20px; margin: 15px 0; border-left: 4px solid #667eea; }
        .comment-header { display: flex; align-items: center; margin-bottom: 10px; }
        .comment-avatar { width: 32px; height: 32px; background: #667eea; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; margin-right: 10px; }
        .comment-author { font-weight: bold; color: #333; }
        .comment-time { color: #999; font-size: 12px; margin-left: auto; }
        .comment-content { color: #333; line-height: 1.6; margin-bottom: 10px; }
        .comment-actions { display: flex; gap: 10px; }
        .btn-like, .btn-reply { background: none; border: none; color: #667eea; cursor: pointer; padding: 5px; font-size: 12px; }
        .reply-section { margin-top: 15px; padding-left: 20px; border-left: 2px solid #e9ecef; }
        .reply-item { background: #fff; border-radius: 8px; padding: 15px; margin: 10px 0; border: 1px solid #e9ecef; }
        .reply-author { font-weight: bold; color: #667eea; margin-right: 5px; }
        .reply-content { color: #333; }
        .reply-time { color: #999; font-size: 11px; }
        .reply-form { margin-top: 10px; padding: 15px; background: #f8f9fa; border-radius: 8px; }
        .reply-content-input { width: 100%; height: 60px; padding: 10px; border: 1px solid #ddd; border-radius: 5px; resize: vertical; }
        .image-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            animation: fadeIn 0.3s ease-in;
        }
        .image-container {
            position: relative;
            max-width: 95vw;
            max-height: 95vh;
        }
        .image-container img {
            max-width: 100%;
            max-height: 100%;
            display: block;
            border-radius: 8px;
        }
        .preview-overlay {
            position: fixed;
            z-index: 9999;
            border: 2px solid #667eea;
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            pointer-events: none;
            display: none;
        }
        .preview-overlay img {
            max-width: 300px;
            max-height: 300px;
            display: block;
            border-radius: 6px;
        }
        .empty-state {
            text-align: center;
            color: #999;
            padding: 40px;
            background: #f8f9fa;
            border-radius: 10px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="container">
            <a href="list.html">â† è¿”å›åˆ—è¡¨</a>
            <h1 style="margin-top: 10px;">å¤±ç‰©è¯¦æƒ…</h1>
        </div>
    </div>

    <div class="container">
        <div class="detail-card">
            <div class="detail-title">
                <span>ä¸¢å¤±çš„é’±åŒ…</span>
                <span class="type-badge type-lost">å¤±ç‰©</span>
                <span class="status-badge status-lost">æœªæ‰¾åˆ°</span>
            </div>

            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZGRkIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxOCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPuWbvueJh+WKoOi9veS4rTwvdGV4dD48L3N2Zz4=" 
                 class="detail-image" alt="å›¾ç‰‡" data-item-id="1">
            
            <div class="detail-info">
                <span class="detail-label">åˆ†ç±»ï¼š</span>
                <span class="detail-value">è¯ä»¶ç±»</span>
            </div>
            
            <div class="detail-info">
                <span class="detail-label">åœ°ç‚¹ï¼š</span>
                <span class="detail-value">å­¦æ ¡å›¾ä¹¦é¦†</span>
            </div>
            
            <div class="detail-info">
                <span class="detail-label">æ—¶é—´ï¼š</span>
                <span class="detail-value">2024-12-27 14:30</span>
            </div>
            
            <div class="detail-info">
                <span class="detail-label">æè¿°ï¼š</span>
                <div class="detail-value" style="white-space: pre-wrap;">
é»‘è‰²çš®è´¨é’±åŒ…ï¼Œé‡Œé¢æœ‰èº«ä»½è¯ã€å­¦ç”Ÿè¯å’Œå¤šå¼ é“¶è¡Œå¡ã€‚å¦‚æœæœ‰æ‹¾åˆ°è€…è¯·è”ç³»æˆ‘ï¼Œå¿…æœ‰é‡è°¢ï¼
                </div>
            </div>
            
            <div class="contact-info">
                <h3 style="margin-bottom: 15px;">è”ç³»æ–¹å¼</h3>
                <div class="detail-info">
                    <span class="detail-label">ç”µè¯ï¼š</span>
                    <span class="detail-value">138****5678</span>
                </div>
                <div class="detail-info">
                    <span class="detail-label">QQï¼š</span>
                    <span class="detail-value">123456789</span>
                </div>
                <div class="detail-info">
                    <span class="detail-label">å¾®ä¿¡ï¼š</span>
                    <span class="detail-value">wechat123</span>
                </div>
                <div class="detail-info">
                    <span class="detail-label">å‘å¸ƒè€…ï¼š</span>
                    <span class="detail-value">å¼ ä¸‰ï¼ˆ2021001ï¼‰</span>
                </div>
            </div>
            
            <div class="detail-info">
                <span class="detail-label">å‘å¸ƒæ—¶é—´ï¼š</span>
                <span class="detail-value">2024-12-27 15:00</span>
                <span style="margin-left: 20px;">æµè§ˆæ¬¡æ•°ï¼š15</span>
            </div>
            
            <div class="actions">
                <button class="btn btn-success" onclick="updateStatus(getItemId(), 1)">æ ‡è®°ä¸ºå·²æ‰¾åˆ°</button>
                <button class="btn btn-danger" onclick="deleteItem(getItemId())">åˆ é™¤</button>
            </div>
            
            <div class="actions">
                <button class="btn btn-primary" onclick="toggleFavorite()">
                    <span id="favorite-text">â­ æ”¶è—</span>
                </button>
            </div>
            
            <div class="actions">
                <button class="btn btn-info" onclick="downloadImage()">ä¸‹è½½å›¾ç‰‡</button>
            </div>
            
            <div class="actions">
                <button class="btn btn-warning" onclick="reportItem()">ä¸¾æŠ¥</button>
            </div>
            
            <div class="comments-container">
                <h3>è¯„è®º (2)</h3>
                
                <div class="comment-item" id="comment-1">
                    <div class="comment-header">
                        <div class="comment-avatar">æ</div>
                        <div class="comment-author">æå››</div>
                        <div class="comment-time">2024-12-27 16:30</div>
                    </div>
                    <div class="comment-content">
                        æˆ‘æ˜¨å¤©åœ¨å›¾ä¹¦é¦†ä¹Ÿçœ‹åˆ°ä¸€ä¸ªç±»ä¼¼çš„é’±åŒ…ï¼Œå·²ç»äº¤ç»™å‰å°äº†ï¼Œä½ å¯ä»¥å»é—®é—®ã€‚
                    </div>
                    <div class="comment-actions">
                        <button class="btn-like" onclick="likeComment(1)">ğŸ‘ 0</button>
                        <button class="btn-reply" onclick="showReplyForm(1)">å›å¤</button>
                    </div>
                    <div class="reply-section" id="replies-1">
                        <div class="reply-item">
                            <span class="reply-author">å¼ ä¸‰ï¼š</span>
                            <span class="reply-content">è°¢è°¢æé†’ï¼æˆ‘é©¬ä¸Šå»é—®ä¸€ä¸‹ã€‚</span>
                            <div class="reply-time">2024-12-27 16:35</div>
                        </div>
                    </div>
                </div>
                
                <div class="comment-item" id="comment-2">
                    <div class="comment-header">
                        <div class="comment-avatar">ç‹</div>
                        <div class="comment-author">ç‹äº”</div>
                        <div class="comment-time">2024-12-27 17:15</div>
                    </div>
                    <div class="comment-content">
                        å¸Œæœ›èƒ½æ‰¾åˆ°ï¼é’±åŒ…ä¸¢äº†ä¸€å®šå¾ˆç€æ€¥ã€‚
                    </div>
                    <div class="comment-actions">
                        <button class="btn-like" onclick="likeComment(2)">ğŸ‘ 0</button>
                        <button class="btn-reply" onclick="showReplyForm(2)">å›å¤</button>
                    </div>
                </div>
                
                <div class="comment-form">
                    <textarea id="comment-content" placeholder="å†™ä¸‹ä½ çš„è¯„è®º..." 
                              style="width: 100%; height: 80px; padding: 10px; border: 1px solid #ddd; border-radius: 5px; resize: vertical;"></textarea>
                    <button class="btn btn-primary" onclick="submitComment()" style="margin-top: 10px;">å‘è¡¨è¯„è®º</button>
                </div>
            </div>
        </div>
    </div>

    <button class="scroll-top" onclick="scrollToTop()" id="scroll-top">â†‘</button>
    <div class="progress-bar" id="progress-bar" style="width: 0%"></div>

    <script>
        // è·å–itemIdçš„å‡½æ•°ï¼Œæ”¯æŒåŠ¨æ€è·å–
        function getItemId() {
            // å°è¯•ä»dataå±æ€§è·å–
            const element = document.querySelector('[data-item-id]');
            if (element) {
                return element.getAttribute('data-item-id');
            }
            // å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œè¿”å›é»˜è®¤å€¼ï¼ˆç”¨äºé™æ€æµ‹è¯•ï¼‰
            return '1';
        }
        
        // å›¾ç‰‡æ”¾å¤§åŠŸèƒ½
        function initImageEnlargement() {
            const detailImage = document.querySelector('.detail-image');
            if (!detailImage) return;
            
            detailImage.addEventListener('click', function() {
                showImageOverlay(this.src, this.alt);
            });
        }
        
        function showImageOverlay(imageSrc, imageAlt) {
            const overlay = document.createElement('div');
            overlay.className = 'image-overlay';
            overlay.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.9);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10000;
                animation: fadeIn 0.3s ease-in;
            `;
            
            const imgContainer = document.createElement('div');
            imgContainer.className = 'image-container';
            imgContainer.style.cssText = `
                position: relative;
                max-width: 95vw;
                max-height: 95vh;
            `;
            
            const img = document.createElement('img');
            img.src = imageSrc;
            img.alt = imageAlt;
            img.style.cssText = `
                max-width: 100%;
                max-height: 100%;
                display: block;
                border-radius: 8px;
            `;
            
            const closeBtn = document.createElement('button');
            closeBtn.innerHTML = 'Ã—';
            closeBtn.style.cssText = `
                position: absolute;
                top: -40px;
                right: 0;
                background: rgba(255,255,255,0.2);
                border: none;
                color: white;
                font-size: 24px;
                width: 40px;
                height: 40px;
                border-radius: 50%;
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
                backdrop-filter: blur(10px);
                transition: all 0.2s ease;
            `;
            
            closeBtn.addEventListener('mouseenter', function() {
                this.style.background = 'rgba(255,255,255,0.3)';
                this.style.transform = 'scale(1.1)';
            });
            
            closeBtn.addEventListener('mouseleave', function() {
                this.style.background = 'rgba(255,255,255,0.2)';
                this.style.transform = 'scale(1)';
            });
            
            closeBtn.onclick = function() {
                overlay.style.animation = 'fadeOut 0.3s ease-in';
                setTimeout(() => {
                    document.body.removeChild(overlay);
                }, 300);
            };
            
            const imgInfo = document.createElement('div');
            imgInfo.style.cssText = `
                position: absolute;
                bottom: -40px;
                left: 0;
                right: 0;
                text-align: center;
                color: white;
                font-size: 14px;
                text-shadow: 0 2px 5px rgba(0,0,0,0.5);
            `;
            
            imgInfo.innerHTML = `
                <div>ç‚¹å‡»å›¾ç‰‡å¤–åŒºåŸŸæˆ–æŒ‰ ESC é”®å…³é—­</div>
            `;
            
            // æ·»åŠ é¼ æ ‡æ»šè½®ç¼©æ”¾åŠŸèƒ½
            let scale = 1;
            img.style.transform = `scale(${scale})`;
            
            overlay.addEventListener('wheel', function(e) {
                e.preventDefault();
                if (e.deltaY < 0) {
                    // æ”¾å¤§
                    scale = Math.min(scale + 0.1, 3);
                } else {
                    // ç¼©å°
                    scale = Math.max(scale - 0.1, 0.5);
                }
                img.style.transform = `scale(${scale})`;
            });
            
            // æ·»åŠ é”®ç›˜äº‹ä»¶
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeBtn.onclick();
                }
            });
            
            imgContainer.appendChild(img);
            imgContainer.appendChild(closeBtn);
            imgContainer.appendChild(imgInfo);
            overlay.appendChild(imgContainer);
            document.body.appendChild(overlay);
            
            // ç‚¹å‡»å›¾ç‰‡å¤–éƒ¨å…³é—­
            overlay.addEventListener('click', function(e) {
                if (e.target === overlay) {
                    closeBtn.onclick();
                }
            });
        }
        
        // å›¾ç‰‡æ‚¬åœé¢„è§ˆåŠŸèƒ½
        function initImageHoverPreview() {
            const detailImage = document.querySelector('.detail-image');
            if (!detailImage) return;
            
            let previewOverlay = null;
            let isMouseOverPreview = false;
            
            // åˆ›å»ºé¢„è§ˆå…ƒç´ 
            function createPreviewOverlay() {
                if (previewOverlay) return previewOverlay;
                
                previewOverlay = document.createElement('div');
                previewOverlay.className = 'preview-overlay';
                previewOverlay.style.cssText = `
                    position: fixed;
                    z-index: 9999;
                    border: 2px solid #667eea;
                    border-radius: 8px;
                    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
                    pointer-events: none;
                    display: none;
                `;
                
                const previewImg = document.createElement('img');
                previewImg.src = detailImage.src;
                previewImg.style.cssText = `
                    max-width: 300px;
                    max-height: 300px;
                    display: block;
                    border-radius: 6px;
                `;
                
                previewOverlay.appendChild(previewImg);
                document.body.appendChild(previewOverlay);
                
                // é¼ æ ‡äº‹ä»¶ç›‘å¬
                previewOverlay.addEventListener('mouseenter', () => {
                    isMouseOverPreview = true;
                });
                
                previewOverlay.addEventListener('mouseleave', () => {
                    isMouseOverPreview = false;
                    previewOverlay.style.display = 'none';
                });
                
                return previewOverlay;
            }
            
            // é¼ æ ‡è¿›å…¥å›¾ç‰‡
            detailImage.addEventListener('mouseenter', function(e) {
                const preview = createPreviewOverlay();
                
                // è®¡ç®—é¢„è§ˆä½ç½®ï¼Œé¿å…è¶…å‡ºå±å¹•
                const mouseX = e.clientX;
                const mouseY = e.clientY;
                const previewWidth = 300;
                const previewHeight = 300;
                
                let previewX = mouseX + 10;
                let previewY = mouseY + 10;
                
                // æ£€æŸ¥å³è¾¹ç•Œ
                if (previewX + previewWidth > window.innerWidth) {
                    previewX = mouseX - previewWidth - 10;
                }
                
                // æ£€æŸ¥ä¸‹è¾¹ç•Œ
                if (previewY + previewHeight > window.innerHeight) {
                    previewY = mouseY - previewHeight - 10;
                }
                
                preview.style.left = previewX + 'px';
                preview.style.top = previewY + 'px';
                preview.style.display = 'block';
            });
            
            // é¼ æ ‡ç¦»å¼€å›¾ç‰‡
            detailImage.addEventListener('mouseleave', function() {
                if (previewOverlay && !isMouseOverPreview) {
                    previewOverlay.style.display = 'none';
                }
            });
            
            // ç¡®ä¿é¢„è§ˆå…ƒç´ è¢«ç§»é™¤
            window.addEventListener('beforeunload', function() {
                if (previewOverlay && document.body.contains(previewOverlay)) {
                    document.body.removeChild(previewOverlay);
                }
            });
        }
        
        // æ”¶è—åŠŸèƒ½
        let isFavorited = false;
        let isLoadingFavorite = false;
        
        function toggleFavorite() {
            if (isLoadingFavorite) return;
            isLoadingFavorite = true;
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€æ˜¾ç¤ºåŠ è½½ä¸­
            const btn = document.querySelector('[onclick="toggleFavorite()"]');
            const originalContent = btn.innerHTML;
            btn.innerHTML = '<span id="favorite-text">å¤„ç†ä¸­...</span>';
            btn.disabled = true;
            
            // æ¨¡æ‹ŸAPIè°ƒç”¨
            setTimeout(() => {
                isLoadingFavorite = false;
                btn.disabled = false;
                
                isFavorited = !isFavorited;
                updateFavoriteButton();
                showMessage(isFavorited ? 'æ”¶è—æˆåŠŸ' : 'å–æ¶ˆæ”¶è—', 'success');
            }, 1000);
        }
        
        function updateFavoriteButton() {
            const btn = document.querySelector('[onclick="toggleFavorite()"]');
            const text = document.getElementById('favorite-text');
            
            if (isFavorited) {
                text.textContent = 'â­ å·²æ”¶è—';
                btn.className = 'btn btn-success';
            } else {
                text.textContent = 'â­ æ”¶è—';
                btn.className = 'btn btn-primary';
            }
        }
        
        function showMessage(message, type) {
            // ç®€å•çš„æ¶ˆæ¯æç¤º
            const messageDiv = document.createElement('div');
            messageDiv.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${type === 'success' ? '#51cf66' : '#ff6b6b'};
                color: white;
                padding: 10px 20px;
                border-radius: 5px;
                z-index: 10001;
                animation: slideUp 0.3s ease-out;
            `;
            messageDiv.textContent = message;
            
            document.body.appendChild(messageDiv);
            
            setTimeout(() => {
                messageDiv.style.animation = 'fadeOut 0.3s ease-in';
                setTimeout(() => {
                    if (document.body.contains(messageDiv)) {
                        document.body.removeChild(messageDiv);
                    }
                }, 300);
            }, 2000);
        }
        
        // è¯„è®ºç›¸å…³åŠŸèƒ½
        function submitComment() {
            const content = document.getElementById('comment-content').value.trim();
            if (!content) {
                showMessage('è¯·è¾“å…¥è¯„è®ºå†…å®¹', 'error');
                return;
            }
            
            // æ¨¡æ‹Ÿæäº¤
            setTimeout(() => {
                document.getElementById('comment-content').value = '';
                showMessage('è¯„è®ºå‘è¡¨æˆåŠŸ', 'success');
            }, 1000);
        }
        
        function likeComment(commentId) {
            // æ¨¡æ‹Ÿç‚¹èµ
            showMessage('ç‚¹èµæˆåŠŸ', 'success');
        }
        
        function showReplyForm(commentId) {
            const commentElement = document.getElementById('comment-' + commentId);
            let replyForm = commentElement.querySelector('.reply-form');
            
            if (!replyForm) {
                replyForm = document.createElement('div');
                replyForm.className = 'reply-form';
                replyForm.innerHTML = `
                    <textarea class="reply-content-input" placeholder="å†™ä¸‹ä½ çš„å›å¤..."></textarea>
                    <button class="btn btn-primary" onclick="submitReply(${commentId})" style="margin-top: 10px;">å›å¤</button>
                `;
                commentElement.appendChild(replyForm);
            }
            
            replyForm.style.display = replyForm.style.display === 'none' ? 'block' : 'none';
        }
        
        function submitReply(commentId) {
            const replyContent = document.querySelector('.reply-content-input').value.trim();
            if (!replyContent) {
                showMessage('è¯·è¾“å…¥å›å¤å†…å®¹', 'error');
                return;
            }
            
            // æ¨¡æ‹Ÿæäº¤
            setTimeout(() => {
                showMessage('å›å¤å‘è¡¨æˆåŠŸ', 'success');
                document.querySelector('.reply-form').style.display = 'none';
            }, 1000);
        }
        
        // å…¶ä»–åŠŸèƒ½å‡½æ•°ï¼ˆæ¨¡æ‹Ÿï¼‰
        function updateStatus(itemId, status) {
            showMessage('çŠ¶æ€æ›´æ–°æˆåŠŸ', 'success');
        }
        
        function deleteItem(itemId) {
            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªå¤±ç‰©å—ï¼Ÿ')) {
                showMessage('åˆ é™¤æˆåŠŸ', 'success');
            }
        }
        
        function downloadImage() {
            const imageUrl = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZGRkIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxOCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPuWbvueJh+WKoOi9veS4rTwvdGV4dD48L3N2Zz4=';
            const link = document.createElement('a');
            link.href = imageUrl;
            link.download = 'å¤±ç‰©å›¾ç‰‡_' + getItemId() + '.jpg';
            link.click();
        }
        
        function reportItem() {
            const reason = prompt('è¯·è¾“å…¥ä¸¾æŠ¥åŸå› ï¼š');
            if (reason && reason.trim()) {
                showMessage('ä¸¾æŠ¥å·²æäº¤ï¼Œæˆ‘ä»¬ä¼šå°½å¿«å¤„ç†', 'success');
            }
        }
        
        // æ»šåŠ¨åˆ°é¡¶éƒ¨åŠŸèƒ½
        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }
        
        // ç›‘å¬æ»šåŠ¨äº‹ä»¶
        window.addEventListener('scroll', function() {
            const scrollTopBtn = document.getElementById('scroll-top');
            const progressBar = document.getElementById('progress-bar');
            
            // æ˜¾ç¤º/éšè—å›åˆ°é¡¶éƒ¨æŒ‰é’®
            if (window.pageYOffset > 300) {
                scrollTopBtn.style.display = 'block';
            } else {
                scrollTopBtn.style.display = 'none';
            }
            
            // æ›´æ–°è¿›åº¦æ¡
            const scrollHeight = document.documentElement.scrollHeight - window.innerHeight;
            const scrollTop = window.pageYOffset;
            const progress = (scrollTop / scrollHeight) * 100;
            progressBar.style.width = progress + '%';
        });
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            initImageEnlargement();
            initImageHoverPreview();
            updateFavoriteButton();
            
            // æ·»åŠ é¡µé¢åŠ è½½åŠ¨ç”»
            const container = document.querySelector('.container');
            if (container) {
                container.style.opacity = '0';
                container.style.transform = 'translateY(20px)';
                
                setTimeout(() => {
                    container.style.transition = 'all 0.5s ease-out';
                    container.style.opacity = '1';
                    container.style.transform = 'translateY(0)';
                }, 100);
            }
        });
    </script>
</body>
</html>